/*!
 * jQuery.imageChanger 
 * version: 2.0.1
 * license: MIT
 * copyright: tsuyoshiwada 2015 All Right Reserved.
 * build: 2015-01-31 20:26:51 GMT+0900
 */
!function(a,b,c){"use strict";function d(){this.version=g,this.options=null,this.transition=null,this.imageTypes="",this.$elem=null,this.$img=null,this.$parant=null,this.$on=null,this.$off=null,this.status={active:!1,animate:!1,enable:!1,loaded:!1,error:!1},this.touchTimer=!1,this.on="",this.off="",this._initialize.apply(this,arguments)}function e(a,b,d){return Array.prototype.slice.call(a,b,d!==c?d:a.length)}function f(a){return!a||""===a||0===a}var g="2.0.1",h={suffix:"_on",hover:!0,transition:{type:"fade"},backgroundImage:!1,imageTypes:"jpg|jpeg|gif|png",beforeInit:!1,afterInit:!1,beforeChange:!1,afterChange:!1,beforeOnImage:!1,afterOnImage:!1,beforeOffImage:!1,afterOffImage:!1},i=a.map(h,function(a,b){return b}),j="ic",k={ROLL_OVER:"mouseenter."+j,ROLL_OUT:"mouseleave."+j,CLICK:"click."+j},l={TOUCH_START:"touchstart."+j,TOUCH_END:"touchend."+j,TOUCH_MOVE:"touchmove."+j},m={image:j+"-image",inner:j+"-inner",on:j+"-on",off:j+"-off"},n="ontouchstart"in b,o=b.addEventListener===c&&document.querySelectorAll===c;a.imageChanger={};var p=a.imageChanger.transition={builtin:{}};p.base={defaults:{duration:150,easing:"linear",opacity:0},initialize:function(a){a=a},on:function(a,b){a=a,this.$off.css("opacity",0),b.call()},off:function(a,b){a=a,this.$off.css("opacity",1),b.call()},destroy:function(){}},a.imageChanger.registerTransition=function(b,c){p.builtin[b]=a.extend({},p.base,c)},a.imageChanger.unregisterTransition=function(a){delete p.builtin[a]},d.prototype._initialize=function(b,c){if(this.$elem=b,this.options=c,this._callbackApply("beforeInit",c.beforeInit)===!1)return!1;this.$img=b.find("img"),this.$parent=this.$img.parent(),this.transition=this._getTransition(),this.imageTypes="string"===a.type(c.imageTypes)?c.imageTypes.split("|"):c.imageTypes,this.imageTypes="\\."+this.imageTypes.join("|\\.");var d="";if(c.backgroundImage?(d=this.$elem.css("background-image"),d=""!==d?d.match(/url\((\S+)\)/)[1]:"",d=d.replace(/"/g,"")):d=this.$img.attr("src"),f(d))return!1;var e=this._hasSuffix(d);e?(this.on=d,this.off=this._removeSuffix(d),this.status.active=!0):(this.on=this._addSuffix(d),this.off=d),this._buildHtml(),a("<img>").on("load",a.proxy(this._loadSuccess,this)).on("error",a.proxy(this._loadError,this)).attr("src",e?this.off:this.on)},d.prototype._buildHtml=function(){var b,c,d,e,f,g=this.$elem,h=g.html(),i={width:g.width(),height:g.height()},j={position:"absolute",zIndex:1,top:0,left:0,display:"inline-block",width:i.width,height:i.height};this.options.backgroundImage===!0?(f=g.css("position"),f="static"!=f?f:"relative",j.zIndex=3,b=a("<span>").addClass(m.inner).css(j).html(h),j.zIndex=2,j.backgroundImage="url("+this.off+")",d=a("<span>").addClass(m.off).css(j),j.zIndex=1,j.backgroundImage="url("+this.on+")",e=a("<span>").addClass(m.on).css(j),g.css({"background-image":"transparent",position:f}).append(b).append(d).append(e)):(d=this.$img,f=d.css("position"),e=a(a("<div>").append(d.clone()).html()),e.addClass(m.on).attr("src",this.on).css({position:"absolute","z-index":1}),d.wrap('<span class="'+m.image+'" style="position:relative; display:inline-block; /display:inline; /zoom:1;"></span>'),c=this.$elem.find(m.image),"static"===f?(d.css("position","relative"),e.css({top:0,left:0})):e.css({top:d.css("top"),right:d.css("right"),bottom:d.css("bottom"),left:d.css("left")}),d.css("z-index",2).addClass(m.off),this.$elem.find("."+m.image).append(e)),this.$on=e,this.$off=d,this.$inner=b,this.$image=c,this.status.active&&this.$off.attr("src",this.off).css("opacity",0)},d.prototype._unbuildHtml=function(){this.options.backgroundImage===!0?(this.$elem.css({"background-image":"",position:""}),this.$inner.remove(),this.$on.remove(),this.$off.remove()):(this.$img.unwrap(),this.$on.remove(),this.$off.css({position:"","z-index":""}).removeClass(m.off))},d.prototype._loadSuccess=function(){this.status.enable=this.status.loaded=!0,this._bindEvents(),this.transition.initialize.call(this,a.extend({},this.transition.defaults,this.options.transition)),this._callbackApply("afterInit",this.options.afterInit,"success")},d.prototype._loadError=function(){this.status.error=!0,this._callbackApply("afterInit",this.options.afterInit,"error")},d.prototype._bindEvents=function(){var c=this;c.options.hover===!0&&(n?c.$elem.on(l.TOUCH_START,a.proxy(c._onTouchStartHandler,c)).on(l.TOUCH_END,a.proxy(c._onTouchEndHandler,c)).on(l.TOUCH_MOVE,a.proxy(c._onTouchMoveHandler,c)):c.$elem.on(k.ROLL_OVER,a.proxy(c._onRollOverHandler,c)).on(k.ROLL_OUT,a.proxy(c._onRollOutHandler,c))),o&&c.$parent.is("a")&&c.$parent.css("cursor","pointer").on(k.CLICK,function(c){c.preventDefault();var d=a(this).attr("href"),e=a(this).attr("target");"_blank"===e?b.open(d,e):location.href=d})},d.prototype._unbindEvents=function(){this.options.hover===!0&&(n?this.$elem.off(l.TOUCH_START).off(l.TOUCH_END).off(l.TOUCH_MOVE):this.$elem.off(k.ROLL_OVER).off(k.ROLL_OUT)),o&&this.$parent.is("a")&&this.$parent.css("cursor","").off(k.CLICK)},d.prototype._onRollOverHandler=function(){this.onImage()},d.prototype._onRollOutHandler=function(){this.offImage()},d.prototype._onTouchStartHandler=function(){this.onImage()},d.prototype._onTouchEndHandler=function(){this.offImage()},d.prototype._onTouchMoveHandler=function(){this.touchTimer&&clearTimeout(this.touchTimer),this.touchTimer=setTimeout(a.proxy(this.offImage,this),200)},d.prototype._isChangeEnable=function(){return!this.status.error&&this.status.enable},d.prototype._callbackApply=function(){var b=arguments[0],c=arguments[1],d=e(arguments,2),f=a.isFunction(c)?c:function(){},g=f.apply(this,d),h=new a.Event(j+"."+b);return this.$elem.trigger(h,this),g},d.prototype._hasSuffix=function(a){return a.match(new RegExp("^(.+)"+this.options.suffix+"("+this.imageTypes+")$","gi"))?!0:!1},d.prototype._addSuffix=function(a){return a.replace(new RegExp("^(.+)("+this.imageTypes+")$","gi"),"$1"+this.options.suffix+"$2")},d.prototype._removeSuffix=function(a){return a.replace(new RegExp("^(.+)("+this.options.suffix+")("+this.imageTypes+")$","gi"),"$1$3")},d.prototype._transition=function(b,c){var d=this,e=a.extend({},d.transition.defaults,d.options.transition||{});d.transition[b].call(d,e,function(){c.call(d)})},d.prototype._getTransition=function(){if(this.options.transition===!1||"none"===this.options.transition)return a.extend({},p.base);if(p.builtin.hasOwnProperty(this.options.transition.type))return p.builtin[this.options.transition.type];if("custom"===this.options.transition.type)return a.extend({},p.base,this.options.transition);throw new Error("[ImageChanger] :: Is invalid specification of transition.")},d.prototype.toggle=function(a){this.status.active?this.offImage(a):this.onImage(a)},d.prototype.onImage=function(b){return!this._isChangeEnable()||this.status.active?!1:this._callbackApply("beforeChange",this.options.beforeChange,"on")===!1?!1:this._callbackApply("beforeOnImage",this.options.beforeOnImage)===!1?!1:(this.status.active=!0,this.status.animate=!0,void this._transition("on",function(){this.status.animate=!1,this._callbackApply("afterChange",this.options.afterChange,"on"),this._callbackApply("afterOnImage",this.options.afterOnImage),a.isFunction(b)&&b.call(this)}))},d.prototype.offImage=function(b){return this._isChangeEnable()&&this.status.active?this._callbackApply("beforeChange",this.options.beforeChange,"off")===!1?!1:this._callbackApply("beforeOffImage",this.options.beforeOffImage)===!1?!1:(this.status.active=!1,this.status.animate=!0,void this._transition("off",function(){this.status.animate=!1,this._callbackApply("afterChange",this.options.afterChange,"off"),this._callbackApply("afterOffImage",this.options.afterOffImage),a.isFunction(b)&&b.call(this)})):!1},d.prototype.disable=function(){this.status.enable=!1},d.prototype.enable=function(){this.status.error||(this.status.enable=!0)},d.prototype.destroy=function(){return this.$elem.data("imageChanger")?(this.transition.destroy.call(this),this._unbindEvents(),this._unbuildHtml(),this.status.enable=!1,void this.$elem.removeData("imageChanger")):!1},a.fn.imageChanger=function(b){return this.each(function(){var e,f=a(this),g={};f.data("imageChanger")||(a.each(i,function(b,d){e=f.data(a.camelCase(j+"-"+d.toLowerCase())),e!==c&&(g[d]=e)}),f.data("imageChanger",new d(f,a.extend({},h,b,g))))})}}(jQuery,window),function(a){"use strict";a.imageChanger.registerTransition("fade",{on:function(a,b){this.$off.stop().animate({opacity:a.opacity},a.duration,a.easing,b)},off:function(a,b){this.$off.stop().animate({opacity:1},a.duration,a.easing,b)},destroy:function(){this.$off.stop(!0,!0).css("opacity","")}}),a.imageChanger.registerTransition("wink",{defaults:{duration:150,easing:"swing",opacity:.4},on:function(a,b){this.$off.is(":animated")?b.call():this.$off.stop().animate({opacity:a.opacity},a.duration,a.easing).animate({opacity:1},a.duration,a.easing,b)},off:function(a,b){a=a,b.call()},destroy:function(){this.$off.stop(!0,!0).css("opacity","")}}),a.imageChanger.registerTransition("slide",{defaults:{duration:150,easing:"swing",direction:"top",display:"inline-block"},initialize:function(a){var b="static"===this.$elem.css("position")?"relative":this.$elem.css("position");this.$elem.css({position:b,overflow:"hidden",display:a.display});var c={width:this.$elem.width(),height:this.$elem.height()};switch(a.direction){case"top":this.$off.css({top:0}),this.$on.css({top:c.height});break;case"right":this.$off.css({left:0}),this.$on.css({left:-c.width});break;case"bottom":this.$off.css({top:0}),this.$on.css({top:-c.height});break;case"left":this.$off.css({left:0}),this.$on.css({left:c.width})}},on:function(a,b){var c={width:this.$elem.width(),height:this.$elem.height()};switch(a.direction){case"top":this.$off.stop().animate({top:-c.height},a.duration,a.easing),this.$on.stop().animate({top:0},a.duration,a.easing,b);break;case"right":this.$off.stop().animate({left:c.width},a.duration,a.easing),this.$on.stop().animate({left:0},a.duration,a.easing,b);break;case"bottom":this.$off.stop().animate({top:c.height},a.duration,a.easing),this.$on.stop().animate({top:0},a.duration,a.easing,b);break;case"left":this.$off.stop().animate({left:-c.width},a.duration,a.easing),this.$on.stop().animate({left:0},a.duration,a.easing,b)}},off:function(a,b){var c={width:this.$elem.width(),height:this.$elem.height()};switch(a.direction){case"top":this.$off.stop().animate({top:0},a.duration,a.easing),this.$on.stop().animate({top:c.height},a.duration,a.easing,b);break;case"right":this.$off.stop().animate({left:0},a.duration,a.easing),this.$on.stop().animate({left:-c.width},a.duration,a.easing,b);break;case"bottom":this.$off.stop().animate({top:0},a.duration,a.easing),this.$on.stop().animate({top:-c.height},a.duration,a.easing,b);break;case"left":this.$off.stop().animate({left:0},a.duration,a.easing),this.$on.stop().animate({left:c.width},a.duration,a.easing,b)}},destroy:function(){var a={top:"",right:"",bottom:"",left:""};this.$off.stop(!0,!0).css(a),this.$on.stop(!0,!0).css(a),this.$elem.css({position:"",overflow:"",display:""})}})}(jQuery,window);